var te=Object.defineProperty;var W=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var j=(m,c,t)=>c in m?te(m,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[c]=t,K=(m,c)=>{for(var t in c||(c={}))pe.call(c,t)&&j(m,t,c[t]);if(W)for(var t of W(c))ce.call(c,t)&&j(m,t,c[t]);return m};import{k as D,l as y,r as l,e as G,w as re,o as de,b as o,c as a,i as n,n as u,m as h,u as E,q as le,s as S,t as f,v as k,F as B,x as H,y as me,z as I,A as ge,B as ue,C as fe,D as ve,E as Ce,G as Ee,H as ke,I as he}from"./index.03a779d0.js";const Ae={class:"inset-0 fixed z-30 border bg-[#000] bg-opacity-80 flex"},Se={class:"w-[1126px] h-[868px] max-h-full max-w-full bg-white mx-auto my-auto relative rounded-lg"},be=n("img",{src:Ce,alt:"close icon"},null,-1),De=[be],ye={class:"flex h-full"},xe={class:"w-[821px] border-r pl-8 pr-[57px] pt-[42px]"},Pe=n("p",{class:"font-bold mb-[36px]"},"Media",-1),Ie={class:"flex gap-x-3"},Re={class:"px-3"},Te={class:"ml-auto"},we={class:"-mt-1 relative"},Me=["onKeypress"],Oe=n("span",{class:"peer-placeholder-shown:visible invisible absolute h-3 top-2 left-2 text-[#AEAEAE] text-xs pointer-events-none"},[n("img",{class:"inline-block -mt-1",src:ge,alt:"rtfetafs"}),S(" Cari file ")],-1),Ue={class:"pt-5 border-t"},Fe={key:0,class:"overflow-y-scroll scroll-blue h-[509px]"},Ve={class:"flex justify-between pr-6 mb-6"},Ne={class:"text-sm"},Le=n("img",{class:"inline mx-1.5",src:Ee,alt:"reset"},null,-1),We=S("Reset filter"),je=[Le,We],Ke={class:"text-sm text-[#999999]"},Ge={class:"grid grid-cols-5 gap-r-[31px] gap-y-3"},Be={key:0,class:"w-[114px] h-[114px] rounded border-2 border-[#50A718] relative flex items-center px-[11px]"},He={key:0,class:"absolute bg-blue-600 w-[15px] h-[15px] top-1 right-1 text-[10px] text-white text-center rounded-sm"},ze=["onClick"],Je=n("img",{class:"h-6 w-6 rounded object-cover bg-[#F5F5F6] absolute top-6",src:ke,alt:"video"},null,-1),Ye=[Je],Xe={class:"absolute bottom-0 left-0 w-full h-8 flex justify-center items-center bg-[#EAEAEA] px-1 overflow-hidden"},qe={key:0,class:"grid grid-cols-5 gap-r-[31px] gap-y-3"},$e={key:1,class:"text-center pt-48"},Ze=n("p",{class:"font-bold text-base"}," Belum ada media yang di simpan ",-1),Qe=n("p",{class:"text-sm"},"Silahkan unggah media di halaman upload",-1),en=[Ze,Qe],nn={key:1},_n=n("h1",null,"upload",-1),sn=[_n],on={class:"border-t pt-[29px] mt-[19px]"},an={class:"block ml-auto w-max"},tn=n("img",{class:"inline-block mt",src:ue,alt:"trash icon"},null,-1),pn=S(" Delete"),cn=S("Insert"),rn={key:0,class:"overflow-scroll scroll-blue mt-[52px] pl-[31px] pr-4"},dn={key:0},ln={class:"flex"},mn=n("div",{class:"w-[60px] h-[60px] border rounded border-[#DEDEDE]"},null,-1),gn={class:"ml-[31px] flex flex-col space-y-0.5 max-w-[150px]"},un=n("p",null,"Uploading...",-1),fn={key:1},vn={class:"flex flex-col gap-y-5"},Cn={class:"flex flex-col space-y-0.5 max-w-[150px]"},En={class:"text-xs font-bold"},kn={class:"text-xs"},hn={class:"text-xs"},An={class:"text-xs"},Sn={class:"mt-5 w-[241px]"},bn={class:"mb-3"},Dn=n("label",{class:"inline-block w-full mb-1"},"File URL",-1),yn=["value"],xn=S(" Copy URL to clipboard "),Pn=n("span",{class:"text-xs text-[#999999]"},"Instansi/Nama",-1),wn={name:"VideoMediaGalleryPicker",props:{editor:Object,defaultType:{type:String,default:"All Media"}},emits:["onupdateElementShow"],setup(m,{emit:c}){const t=m,R=D(()=>y(()=>import("./index.03a779d0.js").then(function(e){return e.J}),["assets/index.03a779d0.js","assets/index.d765d24b.css"])),w=D(()=>y(()=>import("./index.03a779d0.js").then(function(e){return e.K}),["assets/index.03a779d0.js","assets/index.d765d24b.css"])),z=D(()=>y(()=>import("./index.03a779d0.js").then(function(e){return e.T}),["assets/index.03a779d0.js","assets/index.d765d24b.css"])),J=D(()=>y(()=>import("./index.03a779d0.js").then(function(e){return e.L}),["assets/index.03a779d0.js","assets/index.d765d24b.css"])),Y=D(()=>y(()=>import("./VideoJs.c511a821.js"),["assets/VideoJs.c511a821.js","assets/VideoJs.4c66c1a2.css","assets/index.03a779d0.js","assets/index.d765d24b.css"])),g=l(null),v=l("media"),C=l("All dates"),r=l("All media"),p=l([]),x=l(!0),X=l(20),M=l(""),T=l(!1),O=l("Original"),b=l(""),q=async()=>{await fe(_.key).finally(()=>{_.detail=null,_.key=null,_.name=null,_.size=null,_["alt-text"]=null,_.alignment="Center",_.ShowedSize="Medium",getimagesList()}).catch(e=>console.log(e))},_=G({detail:null,key:null,name:null,size:null,"alt-text":null,alignment:"Center",ShowedSize:"Medium"}),U=G({duration:null}),F=e=>e.toString().padStart(2,0),$=e=>{let s=Math.floor(e/60),i=Math.floor(e%60),d=`${F(s)}:${F(i)}`;U.duration=d},Z=()=>{const e=A(_.key);navigator.clipboard.writeText(e);const s=document.getElementsByClassName("copy-url")[0];T.value=!0,s.textContent="Link Berhasil di copy!",setTimeout(()=>{s.textContent="Copy URL to clipboard",T.value=!1},2e3)};re(O,(e,s)=>{const i=A(_.key);if(e==="Original"){b.value=i;return}const d=e.split("x");b.value=resizeImage(i,parseInt(d[0]),parseInt(d[1]))});const Q=()=>{let e=[];var s=new Date,i=new Array("January","February","March","April","May","June","July","August","September","October","November","December");s.setDate(1);for(let d=0;d<=11;d++)e.push(i[s.getMonth()]+" "+s.getFullYear()),s.setMonth(s.getMonth()-1);return e},V=e=>{e!==C.value&&(C.value=e)},ee=e=>{M.value=e.target.value,L()},ne=e=>{const s=new Image;s.onload=function(){_.size=this.width+"x"+this.height},s.src=A(e)},_e=async e=>await he(e),N=async e=>{if(!p.value||p.value.length<=0)return;_.detail=await _e(e),_.key=e;const s=p.value.find(i=>i.Key===e);_.name=s.data.title.raw,ne(e)},L=async(e=null)=>{p.value=[],x.value=!0;const s=[],i=new Date(C.value);r.value="Videos",r.value!=="All media"&&C.value!=="All dates"?(s.push({type:r.value==="Videos"?r.value.toLowerCase().slice(0,-1):r.value.toLowerCase()}),s.push({published_date:{from:i,to:new Date(i.getFullYear(),i.getMonth()+1,1)}})):r.value!=="All media"?s.push({type:r.value==="Videos"?r.value.toLowerCase().slice(0,-1):r.value.toLowerCase()}):C.value!=="All dates"&&s.push({published_date:{from:i,to:new Date(i.getFullYear(),i.getMonth()+1,1)}});const d=await ve(M.value,s).then(P=>P.results);d.length>0?p.value=d.map((P,In)=>K({Key:P.data.id.raw},P)):p.value=[],x.value=!1,!p.value&&(p.value.length<=0||e&&N(e))},se=e=>{const s=new Date(e);var i={year:"numeric",month:"long",day:"numeric"};return s.toLocaleDateString("en-US",i)},A=e=>`https://kompasid-development-interaktif.s3.ap-southeast-1.amazonaws.com/${e}`,ie=async()=>{if(!!_.key){if(_.size!=="Small"&&_.alignment!=="Center"){const e="Image alignment and image size is not valid!";main.showAlert(e);return}O.value==="Original"&&(b.value=A(_.key)),t.container||t.editor.chain().focus().setVideoFigure({id:_.detail.Metadata.title,src:b,credit:_.detail.Metadata.author,caption:_.detail.Metadata.caption}).run(),c("onupdateElementShow",!1,{id:_.detail.Metadata.title,src:b,credit:_.detail.Metadata.author,caption:_.detail.Metadata.caption})}},oe=e=>e.split(/\//g).reverse()[0],ae=e=>({vid:e,type:e.type?e.type:"video/mp4"});return de(()=>{L()}),(e,s)=>(o(),a("div",Ae,[n("div",Se,[n("span",{class:"absolute right-[38px] top-[26px] cursor-pointer",onClick:s[0]||(s[0]=i=>e.$emit("onupdateElementShow",!1))},De),n("div",ye,[n("div",xe,[n("div",null,[Pe,n("div",Ie,[n("div",{onClick:s[1]||(s[1]=i=>v.value="media"),class:"cursor-pointer"},[n("p",{class:u(["text-sm mx-1 mb-3",{"text-[#999999]":v.value!=="media"}])}," Media Library ",2),n("div",{class:u(["h-[5px] w-full bg-[#00559A] rounded-t-md",{invisible:v.value!=="media"}])},null,2)]),n("div",{onClick:s[2]||(s[2]=i=>v.value="upload"),class:"cursor-pointer"},[n("p",{class:u(["mx-6 mb-3 text-sm",{"text-[#999999]":v.value!=="upload"}])}," Upload ",2),n("div",{class:u(["h-[5px] w-full bg-[#00559A] rounded-t-md",{invisible:v.value!=="upload"}])},null,2)]),n("div",Re,[h(E(J),{markdownItems:["All dates",...Q()],class:"w-32 h-7 rounded -mt-1","onUpdate:modelValue":V,modelValue:C.value},null,8,["markdownItems","modelValue"])]),n("div",Te,[n("div",we,[n("input",{min:"1",max:"10",class:"peer w-48 h-7 pl-2 pr-2 inline-block rounded border text-xs outline-none placeholder-shown:border-[#AEAEAE] border-[#00559A]",type:"text",placeholder:" ",onKeypress:le(ee,["enter"])},null,40,Me),Oe])])])]),n("div",Ue,[v.value==="media"?(o(),a("div",Fe,[n("div",Ve,[n("p",Ne,[S(f(r.value)+" | "+f(C.value)+" | ",1),r.value!=="All media"||C.value!=="All dates"?(o(),a("span",{key:0,class:"text-[#00559A] cursor-pointer",onClick:s[3]||(s[3]=i=>{V("All dates"),e.updateMediaType("All media")})},je)):k("",!0)]),n("p",Ke,f(p.value.length)+" / "+f(p.value.length)+" Media ",1)]),n("div",Ge,[g.value?(o(),a("div",Be,[n("div",{class:u(["bg-[#50A718] h-3 rounded-[30px] transition-all",{"w-0":g.value==0,"w-1/2":g.value==.5,"w-full":g.value==1}])},null,2)])):k("",!0),(o(!0),a(B,null,H(p.value,i=>(o(),a("div",{class:u(["w-[114px] h-[114px] rounded box-content relative bg-[#F5F5F6] border-2",{"border-[#50A718]":_.key==i.Key,"border-[#DEDEDE]":_.key!==i.Key}]),key:i.Key},[_.key==i.Key?(o(),a("div",He," \u2714 ")):k("",!0),n("div",{onClick:d=>N(i.Key),class:"w-full h-full rounded bg-[#F5F5F6] flex justify-center cursor-pointer"},Ye,8,ze),n("div",Xe,f(oe(i.Key)),1)],2))),128))]),x.value&&p.value.length<=0?(o(),a("div",qe,[(o(!0),a(B,null,H(X.value,i=>(o(),a("div",{key:i,class:"w-[114px] h-[114px] rounded box-content relative bg-[#F5F5F6] border-2 animate-pulse"}))),128))])):k("",!0),!x.value&&p.value.length<=0?(o(),a("div",$e,en)):k("",!0)])):v.value==="upload"?(o(),a("div",nn,sn)):k("",!0)]),n("div",on,[n("div",an,[_.key?(o(),me(E(R),{key:0,onClick:q,class:"font-bold mr-[31px]"},{default:I(()=>[tn,pn]),_:1})):k("",!0),h(E(R),{class:u(["w-[142px] h-[37px] font-bold text-sm text-white",{"bg-[#DDDDDD]":!_.key,"bg-[#00559A]":_.key}]),onClick:ie},{default:I(()=>[cn]),_:1},8,["class"])])])]),_.key||g.value?(o(),a("div",rn,[g.value?(o(),a("div",dn,[n("div",ln,[mn,n("div",gn,[un,n("div",{class:u(["bg-[#50A718] h-3 rounded-[30px] transition-all",{"w-0":g.value==0,"w-1/2":g.value==.5,"w-full":g.value==1}])},null,2)])])])):(o(),a("div",fn,[n("div",vn,[h(E(Y),{data:ae(A(_.key)),poster:"",onOnvideoElementUpdate:s[4]||(s[4]=i=>$(i))},null,8,["data"]),n("div",Cn,[n("p",En,f(_.name.length>=40?_.name.substring(0,40)+"...":_.name),1),n("p",kn,f(se(_.detail.LastModified)),1),n("p",hn,f(_.size),1),n("p",An,"Length: "+f(U.duration),1)])]),n("div",Sn,[h(E(w),{class:"mb-3",label:"Title",modelValue:_.detail.Metadata.title,"onUpdate:modelValue":s[5]||(s[5]=i=>_.detail.Metadata.title=i),disabled:""},null,8,["modelValue"]),h(E(z),{class:"mb-3",label:"Caption",modelValue:_.detail.Metadata.caption,"onUpdate:modelValue":s[6]||(s[6]=i=>_.detail.Metadata.caption=i),disabled:""},null,8,["modelValue"]),n("div",bn,[Dn,n("input",{value:A(_.key),class:"bg-[#F5F5F6] border border-[#EAEAEA] outline-none rounded text-xs w-full h-10 p-3",type:"text",readonly:""},null,8,yn),h(E(R),{class:u(["border rounded-lg h-10 mt-2 text-xs w-full copy-url",[T.value?"border-[#50A718] text-[#50A718]":"border-[#00559A] text-[#00559A]"]]),onClick:Z},{default:I(()=>[xn]),_:1},8,["class"])]),h(E(w),{class:"mb-3",label:"Credit",modelValue:_.detail.Metadata.author,"onUpdate:modelValue":s[7]||(s[7]=i=>_.detail.Metadata.author=i),disabled:""},{default:I(()=>[Pn]),_:1},8,["modelValue"])])]))])):k("",!0)])])]))}};export{wn as default};
