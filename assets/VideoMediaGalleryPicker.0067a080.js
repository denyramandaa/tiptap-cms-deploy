var te=Object.defineProperty;var K=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var W=(m,c,t)=>c in m?te(m,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[c]=t,j=(m,c)=>{for(var t in c||(c={}))pe.call(c,t)&&W(m,t,c[t]);if(K)for(var t of K(c))ce.call(c,t)&&W(m,t,c[t]);return m};import{e as S,f as b,r as l,g as G,w as re,o as de,a as o,b as a,d as n,n as u,h as A,u as k,i as le,j as y,t as f,k as h,F as H,l as B,m as me,p as I,q as ge,s as ue,v as fe,x as ve,y as Ce,z as ke,A as he}from"./index.dcf2086d.js";const Ee={class:"inset-0 fixed z-30 border bg-[#000] bg-opacity-80 flex"},Ae={class:"w-[1126px] h-[868px] max-h-full max-w-full bg-white mx-auto my-auto relative rounded-lg"},ye=n("img",{src:Ce,alt:"close icon"},null,-1),De=[ye],Se={class:"flex h-full"},be={class:"w-[821px] border-r pl-8 pr-[57px] pt-[42px]"},xe=n("p",{class:"font-bold mb-[36px]"},"Media",-1),Pe={class:"flex gap-x-3"},Ie={class:"px-3"},Te={class:"ml-auto"},we={class:"-mt-1 relative"},Re=["onKeypress"],Me=n("span",{class:"peer-placeholder-shown:visible invisible absolute h-3 top-2 left-2 text-[#AEAEAE] text-xs pointer-events-none"},[n("img",{class:"inline-block -mt-1",src:ge,alt:"rtfetafs"}),y(" Cari file ")],-1),Oe={class:"pt-5 border-t"},Ue={key:0,class:"overflow-y-scroll scroll-blue h-[509px]"},Ve={class:"flex justify-between pr-6 mb-6"},Fe={class:"text-sm"},Ne=n("img",{class:"inline mx-1.5",src:ke,alt:"reset"},null,-1),Le=y("Reset filter"),Ke=[Ne,Le],We={class:"text-sm text-[#999999]"},je={class:"grid grid-cols-5 gap-r-[31px] gap-y-3"},Ge={key:0,class:"w-[114px] h-[114px] rounded border-2 border-[#50A718] relative flex items-center px-[11px]"},He={key:0,class:"absolute bg-blue-600 w-[15px] h-[15px] top-1 right-1 text-[10px] text-white text-center rounded-sm"},Be=["onClick","src"],ze={class:"absolute bottom-0 left-0 w-full h-8 flex justify-center items-center bg-[#EAEAEA] px-1 overflow-hidden"},Je={key:0,class:"grid grid-cols-5 gap-r-[31px] gap-y-3"},Ye={key:1,class:"text-center pt-48"},Xe=n("p",{class:"font-bold text-base"}," Belum ada media yang di simpan ",-1),qe=n("p",{class:"text-sm"},"Silahkan unggah media di halaman upload",-1),$e=[Xe,qe],Ze={key:1},Qe=n("h1",null,"upload",-1),en=[Qe],nn={class:"border-t pt-[29px] mt-[19px]"},_n={class:"block ml-auto w-max"},sn=n("img",{class:"inline-block mt",src:ue,alt:"trash icon"},null,-1),on=y(" Delete"),an=y("Insert"),tn={key:0,class:"overflow-scroll scroll-blue mt-[52px] pl-[31px] pr-4"},pn={key:0},cn={class:"flex"},rn=n("div",{class:"w-[60px] h-[60px] border rounded border-[#DEDEDE]"},null,-1),dn={class:"ml-[31px] flex flex-col space-y-0.5 max-w-[150px]"},ln=n("p",null,"Uploading...",-1),mn={key:1},gn={class:"flex flex-col gap-y-5"},un={class:"flex flex-col space-y-0.5 max-w-[150px]"},fn={class:"text-xs font-bold"},vn={class:"text-xs"},Cn={class:"text-xs"},kn={class:"text-xs"},hn={class:"mt-5 w-[241px]"},En={class:"mb-3"},An=n("label",{class:"inline-block w-full mb-1"},"File URL",-1),yn=["value"],Dn=y(" Copy URL to clipboard "),Sn=n("span",{class:"text-xs text-[#999999]"},"Instansi/Nama",-1),In={name:"VideoMediaGalleryPicker",props:{editor:Object,defaultType:{type:String,default:"All Media"}},emits:["onupdateElementShow"],setup(m,{emit:c}){const t=m,T=S(()=>b(()=>import("./index.dcf2086d.js").then(function(e){return e.I}),["assets/index.dcf2086d.js","assets/index.e0afd9f3.css"])),R=S(()=>b(()=>import("./index.dcf2086d.js").then(function(e){return e.J}),["assets/index.dcf2086d.js","assets/index.e0afd9f3.css"])),z=S(()=>b(()=>import("./index.dcf2086d.js").then(function(e){return e.T}),["assets/index.dcf2086d.js","assets/index.e0afd9f3.css"])),J=S(()=>b(()=>import("./index.dcf2086d.js").then(function(e){return e.K}),["assets/index.dcf2086d.js","assets/index.e0afd9f3.css"])),Y=S(()=>b(()=>import("./VideoJs.bfb46842.js"),["assets/VideoJs.bfb46842.js","assets/VideoJs.d363b2f0.css","assets/index.dcf2086d.js","assets/index.e0afd9f3.css"])),g=l(null),v=l("media"),C=l("All dates"),r=l("All media"),p=l([]),x=l(!0),X=l(20),M=l(""),w=l(!1),O=l("Original"),D=l(""),q=async()=>{await fe(_.key).finally(()=>{_.detail=null,_.key=null,_.name=null,_.size=null,_["alt-text"]=null,_.alignment="Center",_.ShowedSize="Medium",getimagesList()}).catch(e=>console.log(e))},_=G({detail:null,key:null,name:null,size:null,"alt-text":null,alignment:"Center",ShowedSize:"Medium"}),U=G({duration:null}),V=e=>e.toString().padStart(2,0),$=e=>{let s=Math.floor(e/60),i=Math.floor(e%60),d=`${V(s)}:${V(i)}`;U.duration=d},Z=()=>{const e=E(_.key);navigator.clipboard.writeText(e);const s=document.getElementsByClassName("copy-url")[0];w.value=!0,s.textContent="Link Berhasil di copy!",setTimeout(()=>{s.textContent="Copy URL to clipboard",w.value=!1},2e3)};re(O,(e,s)=>{const i=E(_.key);if(e==="Original"){D.value=i;return}const d=e.split("x");D.value=resizeImage(i,parseInt(d[0]),parseInt(d[1]))});const Q=()=>{let e=[];var s=new Date,i=new Array("January","February","March","April","May","June","July","August","September","October","November","December");s.setDate(1);for(let d=0;d<=11;d++)e.push(i[s.getMonth()]+" "+s.getFullYear()),s.setMonth(s.getMonth()-1);return e},F=e=>{e!==C.value&&(C.value=e)},ee=e=>{M.value=e.target.value,L()},ne=e=>{const s=new Image;s.onload=function(){_.size=this.width+"x"+this.height},s.src=E(e)},_e=async e=>await he(e),N=async e=>{if(!p.value||p.value.length<=0)return;_.detail=await _e(e),_.key=e;const s=p.value.find(i=>i.Key===e);_.name=s.data.title.raw,ne(e)},L=async(e=null)=>{p.value=[],x.value=!0;const s=[],i=new Date(C.value);r.value="Videos",r.value!=="All media"&&C.value!=="All dates"?(s.push({type:r.value==="Videos"?r.value.toLowerCase().slice(0,-1):r.value.toLowerCase()}),s.push({published_date:{from:i,to:new Date(i.getFullYear(),i.getMonth()+1,1)}})):r.value!=="All media"?s.push({type:r.value==="Videos"?r.value.toLowerCase().slice(0,-1):r.value.toLowerCase()}):C.value!=="All dates"&&s.push({published_date:{from:i,to:new Date(i.getFullYear(),i.getMonth()+1,1)}});const d=await ve(M.value,s).then(P=>P.results);d.length>0?p.value=d.map((P,bn)=>j({Key:P.data.id.raw},P)):p.value=[],x.value=!1,!p.value&&(p.value.length<=0||e&&N(e))},se=e=>{const s=new Date(e);var i={year:"numeric",month:"long",day:"numeric"};return s.toLocaleDateString("en-US",i)},E=e=>`https://kompasid-development-interaktif.s3.ap-southeast-1.amazonaws.com/${e}`,ie=async()=>{if(!!_.key){if(_.size!=="Small"&&_.alignment!=="Center"){const e="Image alignment and image size is not valid!";main.showAlert(e);return}O.value==="Original"&&(D.value=E(_.key)),t.container||t.editor.chain().focus().setVideoFigure({id:_.detail.Metadata.title,src:D,credit:_.detail.Metadata.author,caption:_.detail.Metadata.caption}).run(),c("onupdateElementShow",!1,{id:_.detail.Metadata.title,src:D,credit:_.detail.Metadata.author,caption:_.detail.Metadata.caption})}},oe=e=>e.split(/\//g).reverse()[0],ae=e=>({vid:e,type:e.type?e.type:"video/mp4"});return de(()=>{L()}),(e,s)=>(o(),a("div",Ee,[n("div",Ae,[n("span",{class:"absolute right-[38px] top-[26px] cursor-pointer",onClick:s[0]||(s[0]=i=>e.$emit("onupdateElementShow",!1))},De),n("div",Se,[n("div",be,[n("div",null,[xe,n("div",Pe,[n("div",{onClick:s[1]||(s[1]=i=>v.value="media"),class:"cursor-pointer"},[n("p",{class:u(["text-sm mx-1 mb-3",{"text-[#999999]":v.value!=="media"}])}," Media Library ",2),n("div",{class:u(["h-[5px] w-full bg-[#00559A] rounded-t-md",{invisible:v.value!=="media"}])},null,2)]),n("div",{onClick:s[2]||(s[2]=i=>v.value="upload"),class:"cursor-pointer"},[n("p",{class:u(["mx-6 mb-3 text-sm",{"text-[#999999]":v.value!=="upload"}])}," Upload ",2),n("div",{class:u(["h-[5px] w-full bg-[#00559A] rounded-t-md",{invisible:v.value!=="upload"}])},null,2)]),n("div",Ie,[A(k(J),{markdownItems:["All dates",...Q()],class:"w-32 h-7 rounded -mt-1","onUpdate:modelValue":F,modelValue:C.value},null,8,["markdownItems","modelValue"])]),n("div",Te,[n("div",we,[n("input",{min:"1",max:"10",class:"peer w-48 h-7 pl-2 pr-2 inline-block rounded border text-xs outline-none placeholder-shown:border-[#AEAEAE] border-[#00559A]",type:"text",placeholder:" ",onKeypress:le(ee,["enter"])},null,40,Re),Me])])])]),n("div",Oe,[v.value==="media"?(o(),a("div",Ue,[n("div",Ve,[n("p",Fe,[y(f(r.value)+" | "+f(C.value)+" | ",1),r.value!=="All media"||C.value!=="All dates"?(o(),a("span",{key:0,class:"text-[#00559A] cursor-pointer",onClick:s[3]||(s[3]=i=>{F("All dates"),e.updateMediaType("All media")})},Ke)):h("",!0)]),n("p",We,f(p.value.length)+" / "+f(p.value.length)+" Media ",1)]),n("div",je,[g.value?(o(),a("div",Ge,[n("div",{class:u(["bg-[#50A718] h-3 rounded-[30px] transition-all",{"w-0":g.value==0,"w-1/2":g.value==.5,"w-full":g.value==1}])},null,2)])):h("",!0),(o(!0),a(H,null,B(p.value,i=>(o(),a("div",{class:u(["w-[114px] h-[114px] rounded box-content relative bg-[#F5F5F6] border-2",{"border-[#50A718]":_.key==i.Key,"border-[#DEDEDE]":_.key!==i.Key}]),key:i.Key},[_.key==i.Key?(o(),a("div",He," \u2714 ")):h("",!0),n("img",{class:"h-full w-full rounded object-cover bg-[#F5F5F6]",onClick:d=>N(i.Key),src:E(i.Key),alt:"video"},null,8,Be),n("div",ze,f(oe(i.Key)),1)],2))),128))]),x.value&&p.value.length<=0?(o(),a("div",Je,[(o(!0),a(H,null,B(X.value,i=>(o(),a("div",{key:i,class:"w-[114px] h-[114px] rounded box-content relative bg-[#F5F5F6] border-2 animate-pulse"}))),128))])):h("",!0),!x.value&&p.value.length<=0?(o(),a("div",Ye,$e)):h("",!0)])):v.value==="upload"?(o(),a("div",Ze,en)):h("",!0)]),n("div",nn,[n("div",_n,[_.key?(o(),me(k(T),{key:0,onClick:q,class:"font-bold mr-[31px]"},{default:I(()=>[sn,on]),_:1})):h("",!0),A(k(T),{class:u(["w-[142px] h-[37px] font-bold text-sm text-white",{"bg-[#DDDDDD]":!_.key,"bg-[#00559A]":_.key}]),onClick:ie},{default:I(()=>[an]),_:1},8,["class"])])])]),_.key||g.value?(o(),a("div",tn,[g.value?(o(),a("div",pn,[n("div",cn,[rn,n("div",dn,[ln,n("div",{class:u(["bg-[#50A718] h-3 rounded-[30px] transition-all",{"w-0":g.value==0,"w-1/2":g.value==.5,"w-full":g.value==1}])},null,2)])])])):(o(),a("div",mn,[n("div",gn,[A(k(Y),{data:ae(E(_.key)),poster:"",onOnvideoElementUpdate:s[4]||(s[4]=i=>$(i))},null,8,["data"]),n("div",un,[n("p",fn,f(_.name.length>=40?_.name.substring(0,40)+"...":_.name),1),n("p",vn,f(se(_.detail.LastModified)),1),n("p",Cn,f(_.size),1),n("p",kn,"Length: "+f(U.duration),1)])]),n("div",hn,[A(k(R),{class:"mb-3",label:"Title",modelValue:_.detail.Metadata.title,"onUpdate:modelValue":s[5]||(s[5]=i=>_.detail.Metadata.title=i)},null,8,["modelValue"]),A(k(z),{class:"mb-3",label:"Caption",modelValue:_.detail.Metadata.caption,"onUpdate:modelValue":s[6]||(s[6]=i=>_.detail.Metadata.caption=i)},null,8,["modelValue"]),n("div",En,[An,n("input",{value:E(_.key),class:"bg-[#F5F5F6] border border-[#EAEAEA] outline-none rounded text-xs w-full h-10 p-3",type:"text",readonly:""},null,8,yn),A(k(T),{class:u(["border rounded-lg h-10 mt-2 text-xs w-full copy-url",[w.value?"border-[#50A718] text-[#50A718]":"border-[#00559A] text-[#00559A]"]]),onClick:Z},{default:I(()=>[Dn]),_:1},8,["class"])]),A(k(R),{class:"mb-3",label:"Credit",modelValue:_.detail.Metadata.author,"onUpdate:modelValue":s[7]||(s[7]=i=>_.detail.Metadata.author=i)},{default:I(()=>[Sn]),_:1},8,["modelValue"])])]))])):h("",!0)])])]))}};export{In as default};
