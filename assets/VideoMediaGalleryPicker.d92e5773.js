var te=Object.defineProperty;var W=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var j=(m,c,t)=>c in m?te(m,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[c]=t,K=(m,c)=>{for(var t in c||(c={}))pe.call(c,t)&&j(m,t,c[t]);if(W)for(var t of W(c))ce.call(c,t)&&j(m,t,c[t]);return m};import{f as D,g as b,r as d,h as H,w as re,o as le,b as o,c as a,e as n,n as u,k as E,u as k,H as de,p as S,t as f,m as h,I as G,J as B,l as me,q as I,K as ge,L as ue,M as fe,N as ve,O as Ce,P as ke,Q as he,R as Ee}from"./index.1a86ec7a.js";const Ae={class:"inset-0 fixed z-30 border bg-[#000] bg-opacity-80 flex"},Se={class:"w-[1126px] h-[868px] max-h-full max-w-full bg-white mx-auto my-auto relative rounded-lg"},ye=n("img",{src:Ce,alt:"close icon"},null,-1),De=[ye],be={class:"flex h-full"},xe={class:"w-[821px] border-r pl-8 pr-[57px] pt-[42px]"},Pe=n("p",{class:"font-bold mb-[36px]"},"Media",-1),Ie={class:"flex gap-x-3"},we={class:"px-3"},Te={class:"ml-auto"},Re={class:"-mt-1 relative"},Me=["onKeypress"],Oe=n("span",{class:"peer-placeholder-shown:visible invisible absolute h-3 top-2 left-2 text-[#AEAEAE] text-xs pointer-events-none"},[n("img",{class:"inline-block -mt-1",src:ge,alt:"rtfetafs"}),S(" Cari file ")],-1),Ve={class:"pt-5 border-t"},Ue={key:0,class:"overflow-y-scroll scroll-blue h-[509px]"},Fe={class:"flex justify-between pr-6 mb-6"},Ne={class:"text-sm"},Le=n("img",{class:"inline mx-1.5",src:ke,alt:"reset"},null,-1),We=S("Reset filter"),je=[Le,We],Ke={class:"text-sm text-[#999999]"},He={class:"grid grid-cols-5 gap-r-[31px] gap-y-3"},Ge={key:0,class:"w-[114px] h-[114px] rounded border-2 border-[#50A718] relative flex items-center px-[11px]"},Be={key:0,class:"absolute bg-blue-600 w-[15px] h-[15px] top-1 right-1 text-[10px] text-white text-center rounded-sm"},ze=["onClick"],Ye=n("img",{class:"h-6 w-6 rounded object-cover bg-[#F5F5F6] absolute top-6",src:he,alt:"video"},null,-1),Je=[Ye],Xe={class:"absolute bottom-0 left-0 w-full h-8 flex justify-center items-center bg-[#EAEAEA] px-1 overflow-hidden"},qe={key:0,class:"grid grid-cols-5 gap-r-[31px] gap-y-3"},$e={key:1,class:"text-center pt-48"},Qe=n("p",{class:"font-bold text-base"}," Belum ada media yang di simpan ",-1),Ze=n("p",{class:"text-sm"},"Silahkan unggah media di halaman upload",-1),en=[Qe,Ze],nn={key:1},_n=n("h1",null,"upload",-1),sn=[_n],on={class:"border-t pt-[29px] mt-[19px]"},an={class:"block ml-auto w-max"},tn=n("img",{class:"inline-block mt",src:ue,alt:"trash icon"},null,-1),pn=S(" Delete"),cn=S("Insert"),rn={key:0,class:"overflow-scroll scroll-blue mt-[52px] pl-[31px] pr-4"},ln={key:0},dn={class:"flex"},mn=n("div",{class:"w-[60px] h-[60px] border rounded border-[#DEDEDE]"},null,-1),gn={class:"ml-[31px] flex flex-col space-y-0.5 max-w-[150px]"},un=n("p",null,"Uploading...",-1),fn={key:1},vn={class:"flex flex-col gap-y-5"},Cn={class:"flex flex-col space-y-0.5 max-w-[150px]"},kn={class:"text-xs font-bold"},hn={class:"text-xs"},En={class:"text-xs"},An={class:"text-xs"},Sn={class:"mt-5 w-[241px]"},yn={class:"mb-3"},Dn=n("label",{class:"inline-block w-full mb-1"},"File URL",-1),bn=["value"],xn=S(" Copy URL to clipboard "),Pn=n("span",{class:"text-xs text-[#999999]"},"Instansi/Nama",-1),Rn={name:"VideoMediaGalleryPicker",props:{editor:Object,defaultType:{type:String,default:"All Media"}},emits:["onupdateElementShow"],setup(m,{emit:c}){const t=m,w=D(()=>b(()=>import("./index.1a86ec7a.js").then(function(e){return e.S}),["assets/index.1a86ec7a.js","assets/index.ad8b6a52.css"])),R=D(()=>b(()=>import("./index.1a86ec7a.js").then(function(e){return e.U}),["assets/index.1a86ec7a.js","assets/index.ad8b6a52.css"])),z=D(()=>b(()=>import("./index.1a86ec7a.js").then(function(e){return e.V}),["assets/index.1a86ec7a.js","assets/index.ad8b6a52.css"])),Y=D(()=>b(()=>import("./index.1a86ec7a.js").then(function(e){return e.W}),["assets/index.1a86ec7a.js","assets/index.ad8b6a52.css"])),J=D(()=>b(()=>import("./VideoHtml.4b34c5df.js"),["assets/VideoHtml.4b34c5df.js","assets/index.1a86ec7a.js","assets/index.ad8b6a52.css"])),g=d(null),v=d("media"),C=d("All dates"),r=d("All media"),p=d([]),x=d(!0),X=d(20),M=d(""),T=d(!1),O=d("Original"),y=d(""),q=async()=>{await fe(_.key).finally(()=>{_.detail=null,_.key=null,_.name=null,_.size=null,_["alt-text"]=null,_.alignment="Center",_.ShowedSize="Medium",getimagesList()}).catch(e=>console.log(e))},_=H({detail:null,key:null,name:null,size:null,"alt-text":null,alignment:"Center",ShowedSize:"Medium"}),V=H({duration:null}),U=e=>e.toString().padStart(2,0),$=e=>{let s=Math.floor(e/60),i=Math.floor(e%60),l=`${U(s)}:${U(i)}`;V.duration=l},Q=()=>{const e=A(_.key);navigator.clipboard.writeText(e);const s=document.getElementsByClassName("copy-url")[0];T.value=!0,s.textContent="Link Berhasil di copy!",setTimeout(()=>{s.textContent="Copy URL to clipboard",T.value=!1},2e3)},Z=e=>({vid:e,type:e.type?e.type:"video/mp4"});re(O,(e,s)=>{const i=A(_.key);if(e==="Original"){y.value=i;return}const l=e.split("x");y.value=resizeImage(i,parseInt(l[0]),parseInt(l[1]))});const ee=()=>{let e=[];var s=new Date,i=new Array("January","February","March","April","May","June","July","August","September","October","November","December");s.setDate(1);for(let l=0;l<=11;l++)e.push(i[s.getMonth()]+" "+s.getFullYear()),s.setMonth(s.getMonth()-1);return e},F=e=>{e!==C.value&&(C.value=e)},ne=e=>{M.value=e.target.value,L()},_e=e=>{const s=new Image;s.onload=function(){_.size=this.width+"x"+this.height},s.src=A(e)},se=async e=>await Ee(e),N=async e=>{if(!p.value||p.value.length<=0)return;_.detail=await se(e),_.key=e;const s=p.value.find(i=>i.Key===e);_.name=s.data.title.raw,_e(e)},L=async(e=null)=>{p.value=[],x.value=!0;const s=[],i=new Date(C.value);r.value="Videos",r.value!=="All media"&&C.value!=="All dates"?(s.push({type:r.value==="Videos"?r.value.toLowerCase().slice(0,-1):r.value.toLowerCase()}),s.push({published_date:{from:i,to:new Date(i.getFullYear(),i.getMonth()+1,1)}})):r.value!=="All media"?s.push({type:r.value==="Videos"?r.value.toLowerCase().slice(0,-1):r.value.toLowerCase()}):C.value!=="All dates"&&s.push({published_date:{from:i,to:new Date(i.getFullYear(),i.getMonth()+1,1)}});const l=await ve(M.value,s).then(P=>P.results);l.length>0?p.value=l.map((P,In)=>K({Key:P.data.id.raw},P)):p.value=[],x.value=!1,!p.value&&(p.value.length<=0||e&&N(e))},ie=e=>{const s=new Date(e);var i={year:"numeric",month:"long",day:"numeric"};return s.toLocaleDateString("en-US",i)},A=e=>`https://kompasid-development-interaktif.s3.ap-southeast-1.amazonaws.com/${e}`,oe=async()=>{if(!!_.key){if(_.size!=="Small"&&_.alignment!=="Center"){const e="Image alignment and image size is not valid!";main.showAlert(e);return}O.value==="Original"&&(y.value=A(_.key)),t.container||t.editor.chain().focus().setVideoFigure({id:_.detail.Metadata.title,src:y,credit:_.detail.Metadata.author,caption:_.detail.Metadata.caption}).run(),c("onupdateElementShow",!1,{id:_.detail.Metadata.title,src:y,credit:_.detail.Metadata.author,caption:_.detail.Metadata.caption})}},ae=e=>e.split(/\//g).reverse()[0];return le(()=>{L()}),(e,s)=>(o(),a("div",Ae,[n("div",Se,[n("span",{class:"absolute right-[38px] top-[26px] cursor-pointer",onClick:s[0]||(s[0]=i=>e.$emit("onupdateElementShow",!1))},De),n("div",be,[n("div",xe,[n("div",null,[Pe,n("div",Ie,[n("div",{onClick:s[1]||(s[1]=i=>v.value="media"),class:"cursor-pointer"},[n("p",{class:u(["text-sm mx-1 mb-3",{"text-[#999999]":v.value!=="media"}])}," Media Library ",2),n("div",{class:u(["h-[5px] w-full bg-[#00559A] rounded-t-md",{invisible:v.value!=="media"}])},null,2)]),n("div",{onClick:s[2]||(s[2]=i=>v.value="upload"),class:"cursor-pointer"},[n("p",{class:u(["mx-6 mb-3 text-sm",{"text-[#999999]":v.value!=="upload"}])}," Upload ",2),n("div",{class:u(["h-[5px] w-full bg-[#00559A] rounded-t-md",{invisible:v.value!=="upload"}])},null,2)]),n("div",we,[E(k(Y),{markdownItems:["All dates",...ee()],class:"w-32 h-7 rounded -mt-1","onUpdate:modelValue":F,modelValue:C.value},null,8,["markdownItems","modelValue"])]),n("div",Te,[n("div",Re,[n("input",{min:"1",max:"10",class:"peer w-48 h-7 pl-2 pr-2 inline-block rounded border text-xs outline-none placeholder-shown:border-[#AEAEAE] border-[#00559A]",type:"text",placeholder:" ",onKeypress:de(ne,["enter"])},null,40,Me),Oe])])])]),n("div",Ve,[v.value==="media"?(o(),a("div",Ue,[n("div",Fe,[n("p",Ne,[S(f(r.value)+" | "+f(C.value)+" | ",1),r.value!=="All media"||C.value!=="All dates"?(o(),a("span",{key:0,class:"text-[#00559A] cursor-pointer",onClick:s[3]||(s[3]=i=>{F("All dates"),e.updateMediaType("All media")})},je)):h("",!0)]),n("p",Ke,f(p.value.length)+" / "+f(p.value.length)+" Media ",1)]),n("div",He,[g.value?(o(),a("div",Ge,[n("div",{class:u(["bg-[#50A718] h-3 rounded-[30px] transition-all",{"w-0":g.value==0,"w-1/2":g.value==.5,"w-full":g.value==1}])},null,2)])):h("",!0),(o(!0),a(G,null,B(p.value,i=>(o(),a("div",{class:u(["w-[114px] h-[114px] rounded box-content relative bg-[#F5F5F6] border-2",{"border-[#50A718]":_.key==i.Key,"border-[#DEDEDE]":_.key!==i.Key}]),key:i.Key},[_.key==i.Key?(o(),a("div",Be," \u2714 ")):h("",!0),n("div",{onClick:l=>N(i.Key),class:"w-full h-full rounded bg-[#F5F5F6] flex justify-center cursor-pointer"},Je,8,ze),n("div",Xe,f(ae(i.Key)),1)],2))),128))]),x.value&&p.value.length<=0?(o(),a("div",qe,[(o(!0),a(G,null,B(X.value,i=>(o(),a("div",{key:i,class:"w-[114px] h-[114px] rounded box-content relative bg-[#F5F5F6] border-2 animate-pulse"}))),128))])):h("",!0),!x.value&&p.value.length<=0?(o(),a("div",$e,en)):h("",!0)])):v.value==="upload"?(o(),a("div",nn,sn)):h("",!0)]),n("div",on,[n("div",an,[_.key?(o(),me(k(w),{key:0,onClick:q,class:"font-bold mr-[31px]"},{default:I(()=>[tn,pn]),_:1})):h("",!0),E(k(w),{class:u(["w-[142px] h-[37px] font-bold text-sm text-white",{"bg-[#DDDDDD]":!_.key,"bg-[#00559A]":_.key}]),onClick:oe},{default:I(()=>[cn]),_:1},8,["class"])])])]),_.key||g.value?(o(),a("div",rn,[g.value?(o(),a("div",ln,[n("div",dn,[mn,n("div",gn,[un,n("div",{class:u(["bg-[#50A718] h-3 rounded-[30px] transition-all",{"w-0":g.value==0,"w-1/2":g.value==.5,"w-full":g.value==1}])},null,2)])])])):(o(),a("div",fn,[n("div",vn,[E(k(J),{data:Z(A(_.key)),onOnvideoElementUpdate:s[4]||(s[4]=i=>$(i))},null,8,["data"]),n("div",Cn,[n("p",kn,f(_.name.length>=40?_.name.substring(0,40)+"...":_.name),1),n("p",hn,f(ie(_.detail.LastModified)),1),n("p",En,f(_.size),1),n("p",An,"Length: "+f(V.duration),1)])]),n("div",Sn,[E(k(R),{class:"mb-3",label:"Title",modelValue:_.detail.Metadata.title,"onUpdate:modelValue":s[5]||(s[5]=i=>_.detail.Metadata.title=i),disabled:""},null,8,["modelValue"]),E(k(z),{class:"mb-3",label:"Caption",modelValue:_.detail.Metadata.caption,"onUpdate:modelValue":s[6]||(s[6]=i=>_.detail.Metadata.caption=i),disabled:""},null,8,["modelValue"]),n("div",yn,[Dn,n("input",{value:A(_.key),class:"bg-[#F5F5F6] border border-[#EAEAEA] outline-none rounded text-xs w-full h-10 p-3",type:"text",readonly:""},null,8,bn),E(k(w),{class:u(["border rounded-lg h-10 mt-2 text-xs w-full copy-url",[T.value?"border-[#50A718] text-[#50A718]":"border-[#00559A] text-[#00559A]"]]),onClick:Q},{default:I(()=>[xn]),_:1},8,["class"])]),E(k(R),{class:"mb-3",label:"Credit",modelValue:_.detail.Metadata.author,"onUpdate:modelValue":s[7]||(s[7]=i=>_.detail.Metadata.author=i),disabled:""},{default:I(()=>[Pn]),_:1},8,["modelValue"])])]))])):h("",!0)])])]))}};export{Rn as default};
